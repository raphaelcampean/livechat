<%= turbo_stream_from "messages" %>

<div class="d-flex flex-column justify-content-center align-items-center min-vh-100 bg-light">
	<div class="card shadow w-100" style="max-width: 500px;">
		<div class="card-body">
			<h3 class="card-title text-center mb-4">Live Chat</h3>
			<div class="mb-4" style="max-height: 300px; overflow-y: auto;">
				<%= turbo_frame_tag "messages" do %>
					<% @messages.each do |msg| %>
						<%= turbo_frame_tag dom_id(msg) do %>
							<%= render partial: "message", locals: { message: msg } %>
						<% end %>
					<% end %>
				<% end %>
			</div>
			<%= turbo_frame_tag "form-messages" do %>
				<%= render partial: "messages/form", locals: { message: @message, chat: @chat, current_user: current_user } %>
			<% end %>
		</div>
	</div>
</div>